<tool id="rpCofactors" name="Complete Reactions" version="0.1">
  <description>Add the cofactors to the mono-component reactions generated by RetroPath2.0</description>
  <requirements>
    <container type="docker">brsynth/rpcofactors-standalone</container>
  </requirements>
  <stdio>
    <regex match="WARNING:" level="warning" />
	  <regex match="ERROR:" level="error" />
  </stdio>
  <command detect_errors="exit_code"><![CDATA[
    '$__tool_directory__/tool_rpCofactors.py' -input '$input_type.input' -output '$output' -input_format '$input_type.input_format' -pathway_id '$adv.pathway_id' -compartment_id '$adv.compartment_id' '-rxn_recipes' '$adv.rxn_recipes' -rules_rall '$adv.rules_rall' -compounds '$adv.compounds'
  ]]></command>
  <inputs>
		<conditional name="input_type">
			<param name="input_format" type="select" label="Input/output format">
				<option value="tar" selected="True">TAR</option>
				<option value="sbml" >SBML</option>
			</param>
			<when value="tar">
				<param name="input" type="data" format="tar" label="Input file" />
			</when>
			<when value="sbml">
				<param name="input" type="data" format="sbml" label="Input file" />
			</when>
		</conditional>
		<section name="adv" title="Advanced Options" expanded="false">
      <param name="rules_rall" type="data" optional="true" multiple="false" format="tsv" label="Reaction Rules" />
      <param name="compounds" type="data" optional="true" multiple="false" format="tsv" label="Reaction Rules Compounds" />
			<param name="rxn_recipes" type="data" optional="true" multiple="false" format="tsv" label="Reaction Rules Recipes" />
			<param name="pathway_id" type="text" value="rp_pathway" label="SBML heterologous pathway ID" />
			<param name="compartment_id" type="text" value="MNXC3" label="SBML compartment ID" />
		</section>
  </inputs>
  <outputs>
    <data name="output" format="tar" label="Complete Heterologous Pathways">
      <change_format>
        <when input="input_type.input_format" value="sbml" format="sbml"/>
      </change_format>
    </data>
  </outputs>
  <outputs>
		<data name="output" format="tar" label="Complete Heterolgous Pathways">
      <change_format>
        <when input="input_type.input_format" value="sbml" format="sbml"/>
      </change_format>
    </data>
  </outputs>
  <help><![CDATA[
Complete Reactions
=====================


Given the mono-component reactions generated by the tool "Pathways to SBML", this node adds the cofactors associated with each mono-component reaction generated by RetroPath2.0. The advanced parameters include the name of the heterologous pathway defined by "Pathways to SBML" node, the compartment ID of the SBML file (default is MNXC3, the MetaNetX ID for the cytoplasm). The tool also updates the reaction rule to include the SMILES cofactors to the reaction rule.

|

.. image:: https://raw.githubusercontent.com/Galaxy-SynBioCAD/rpCofactors/standalone/galaxy/img/rpCofactors_2.png
	:width: 80 %
	:align: center

|

The above figure is an example of cofactors (green) being added to a pathway calculated by RetroPath2.0. In the dashed box is an example of a reaction with its reaction rule with the added cofactors (green) added to the rule itself when these are added to the SBML file.

Input
-----

Required:


* **-input**\ : (string) Path to the input file. Can be either a single SBML file or a collection as a tar.xz archive file
* **-input_format**\ : (string) 

Advanced options:


* **-pathway_id**\ : (string, default: rp_pathway) ID of the heterologous pathway
* **-compartment_id**\ : (string, default: MNXC3 (i.e. cytoplasm)) ID of the SBML compartment where the heterologous pathway will be expressed in (default: MNXC3 (i.e. cytoplasm))

Output
------


* **-output**\ : (string) Path to the output file


Project Links
---------------------

* `GitHub <https://github.com/Galaxy-SynBioCAD/rpCofactors>`_
* `Docker <https://hub.docker.com/r/brsynth/rpcofactors>`_


Version
----------

0.1

Authors
-------


* **Melchior du Lac**

License
-------

`MIT <https://raw.githubusercontent.com/Galaxy-SynBioCAD/rpCofactors/standalone-dev/LICENSE>`_

Acknowledgments
---------------


* Thomas Duigou
* Joan HÃ©risson

]]></help>
</tool>
